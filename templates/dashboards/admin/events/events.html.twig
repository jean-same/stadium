{% extends 'baseDashboardAdmin.html.twig' %}

{% block title %}Hello EventsController!
{% endblock %}

{% block body %}
	<div id="main">

		<header class="mb-3">
			<a href="#" class="burger-btn d-block d-xl-none">
				<i class="fa fa-bars fs-3" aria-hidden="true"></i>
			</a>
		</header>
        
		<section id="basic-vertical-layouts">
			<div class="row match-height">
				<div class="col-xl-9 col-lg-12 col-12">
					<div class="white-background border-radius-default padding-bottom-default row">
						<h1 class="title-adherent-pages">
							Vos Ã©venements
						</h1>
						{% for event in events %}
							{% set nbPlacesLeft = event.maxParticipants - event.profiles | length %}
							<div class="card card-adherent mb-3 col-lg-6 ">
								<div class="row g-0 border-default">
									<div class="col-md-6 card-picture">
										<img src="{{ event.picture }}" class="img-fluid rounded-start" alt="...">
									</div>
									<div class="col-md-6">
										<div class="card-body card-body-adherent">
											<h3 class="card-text">
												<span class="text-bold-500"></span>
												{{ event.name }}
											</h3>
											<p class="card-text">
												<span class="text-bold-500"></span>
												{{ event.startDate | date("d-m-Y") }}
												-
												{{ event.endDate | date("d-m-Y") }}
											</p>
											<p class="card-text">
												<span class="text-bold-500"></span>
												{{ event.schedule | format_datetime('none', 'short', locale='en') }}
											</p>
											<p class="card-text">
												<span class="text-bold-500"></span>
												{{ event.place}}
											</p>
											<p class="card-text">
												{% if nbPlacesLeft <= 0  %}
													<span class="badge second-color-background">Complet</span>
												{% else %}
													<span class="text-bold-500 badge bg-{{ nbPlacesLeft > 10 ? 'success' : 'danger' }}">
														{{ nbPlacesLeft }}
														places libre
													</span>
												{% endif %}
											</p>
											<div class="d-flex justify-content-between">
												<a href="{{ path('dashboards_admin_events_edit', { id : event.id }) }}" class="btn bg-warning text-white">
													<i class="fas fa-edit"></i>
												</a>
												<a href="{{ path('dashboards_admin_events_delete', { id : event.id }) }}" class="btn bg-danger text-white">
													<i class="fas fa-trash"></i>
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>

							{% else %}

						{% endfor %}
					</div>
				</div>
				<div class="col-xl-3 col-lg-12 col-12">
					<div class="card">
						<div class="card-header">
							<h4 class="card-title">Ajouter une evenement</h4>
						</div>
						<div class="card-content">
							<div class="card-body">
								{{ form_start(formEvent , {'attr': {'novalidate': 'novalidate' , 'class' : 'form form-vertical' } }) }}
								<div class="form-body">
									<div class="row">
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.name) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.place) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.picture) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.startDate) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.endDate) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.schedule) }}
											</div>
										</div>
										<div class="col-12">
											<div class="form-group">
												{{ form_row(formEvent.maxParticipants) }}
											</div>
										</div>
										<div class="col-12 d-flex justify-content-between">
											<button type="submit" class="btn btn-primary me-1 mb-1 w-100">Soumettre</button>
										</div>
									</div>
								</div>
								{{ form_end(formEvent) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
{% endblock %}
